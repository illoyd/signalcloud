!!!
%html
  %head
    %title= @page_title || 'ticketplease'
    = stylesheet_link_tag    "application", :media => "all"
    - if content_for?( :stylesheets )
      %style{:type => 'text/css'}= yield :stylesheets
    = javascript_include_tag "application"
    = csrf_meta_tags
  %body
    .container
      / Navigation header
      .navbar>
        .navbar-inner
          %a.brand{:href => "/"} ticketplease
          - unless user_signed_in?
            %ul.nav
              %li{ :class => ( request.path == new_user_session_path ? 'active' : '' ) }
                = link_to new_user_session_path do
                  %i.icon-signin
                  Sign In
              %li{ :class => ( request.path == new_user_registration_path ? 'active' : '' ) }
                = link_to new_user_registration_path do
                  %i.icon-upload-alt
                  Sign Up
          - else
            %ul.nav
              %li
                %a{ :href => "/" }
                  %i.icon-dashboard  
                  Dashboard
              %li.dropdown
                %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
                  %i.icon-briefcase
                  Manage
                  %b.caret
                %ul.dropdown-menu
                  - if can? :index, User
                    %li
                      %a{ :href => users_path }
                        = icon(:users)
                        Users
                  - if can? :index, Appliance
                    %li
                      %a{ :href => appliances_path }
                        = icon( :appliances )
                        Appliances
                  - if can? :index, PhoneDirectory
                    %li
                      %a{ :href => phone_directories_path }
                        = icon( :phone_directories )
                        Directories
                  - if can? :index, PhoneNumber
                    %li
                      %a{ :href => phone_numbers_path }
                        = icon( :phone_numbers )
                        Phone Numbers
                  - if can? :index, Ticket
                    %li
                      %a{ :href => tickets_path }
                        = icon( :tickets )
                        Tickets
                  - if can? :index, LedgerEntry
                    %li
                      %a{ :href => ledger_entries_path }
                        = icon( :ledger_entries )
                        Ledger
              %li
                %a{ :href => "#" }
                  %i.icon-bar-chart  
                  Reports
              %li.dropdown
                %a.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
                  %i.icon-user
                  = current_user.first_name
                  %b.caret
                %ul.dropdown-menu
                  - if can? :shadow, Account
                    %li
                      = link_to accounts_path do
                        = icon( :accounts )
                        Switch accounts
                  %li
                    = link_to current_user do
                      %i.icon-cogs
                      Preferences
                  %li
                    = link_to destroy_user_session_path, :method => :delete do
                      %i.icon-off
                      Sign out
            = form_tag tickets_path, :method => 'get', :class => 'navbar-search pull-right' do
              = text_field_tag :search, params[:search], class: 'search-query', placeholder: 'Search Tickets'
  
      / Body
      -# Flash errors, alerts, and notices
      = render 'layouts/messages'
      = yield
  
      / Footer
      .row
        .span12
          .small Footer details here
